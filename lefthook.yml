# EXAMPLE USAGE:
#
#   Refer for explanation to following link:
#   https://lefthook.dev/configuration/
#
pre-push:
  parallel: true
  jobs:
    - run: just lint
      glob: "*.rs"
    - run: just format-check
      glob:
        - "justfile"
        - "**/*.{rs,md,yml,ts,js}"
    - run: cargo shear
    - run: dist plan
    - run: just readmes-check
    - run: just package-json-check
    - run: cargo test
      glob: "**/*.rs"

pre-commit:
  jobs:
    - run: just diet && git add ./crates/**/Cargo.toml Cargo.toml
    - run: just format
      glob:
        - "justfile"
        - "**/*.{rs,md,yml,ts,js}"
      stage_fixed: true
    - run: just readmes && git add "**/*.md" *.md
      glob:
        - "**/*.md"
        - "xtask/templates/**"
      stage_fixed: true
    - run: just package-json
      glob:
        - "xtask/"
        - "Cargo.toml"
        - "dist-workspace.toml"
